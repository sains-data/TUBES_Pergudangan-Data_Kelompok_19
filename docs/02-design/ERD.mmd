erDiagram

  %% ========================
  %% 1. SISTEM PERSURATAN
  %% ========================

  TBL_SURAT_MASUK {
    VARCHAR id_surat PK
    VARCHAR nomor_surat
    DATE    tanggal_surat
    DATE    tanggal_diterima
    VARCHAR pengirim
    TEXT    perihal
    INT     jenis_surat_id FK
    VARCHAR status
    VARCHAR disposisi_ke
    VARCHAR file_path
  }

  TBL_SURAT_KELUAR {
    VARCHAR id_surat PK
    VARCHAR nomor_surat
    DATE    tanggal_surat
    VARCHAR tujuan
    TEXT    perihal
    INT     jenis_surat_id FK
    VARCHAR status
    VARCHAR penandatangan
    VARCHAR file_path
  }

  TBL_DISPOSISI {
    VARCHAR id_disposisi PK
    VARCHAR id_surat FK
    DATETIME tanggal_disposisi
    INT      dari_pegawai_id FK
    INT      kepada_pegawai_id FK
    TEXT     instruksi
    VARCHAR  status
    DATETIME tanggal_selesai
    TEXT     catatan
  }

  REF_JENIS_SURAT {
    INT     id PK
    VARCHAR kode_jenis
    VARCHAR nama_jenis
    VARCHAR kategori
    INT     sla_hari
  }

  %% ========================
  %% 2. SISTEM LAYANAN
  %% ========================

  TBL_PERMINTAAN_LAYANAN {
    INT      id_permintaan PK
    VARCHAR  nomor_tiket
    DATETIME timestamp_submit
    VARCHAR  pemohon_nama
    VARCHAR  pemohon_nip FK
    INT      jenis_layanan_id FK
    TEXT     deskripsi
    INT      unit_tujuan_id FK
    VARCHAR  status_penyelesaian
    DATETIME tanggal_selesai
    DECIMAL  rating_kepuasan
    TEXT     feedback
  }

  REF_JENIS_LAYANAN {
    INT     id PK
    VARCHAR kode_layanan
    VARCHAR nama_layanan
    VARCHAR kategori
    BIT     is_komplain
    INT     sla_hari
  }

  %% ========================
  %% 3. SISTEM INVENTARIS & ASET
  %% ========================

  TBL_INVENTARIS {
    INT      id_barang PK
    VARCHAR  kode_barang
    VARCHAR  nama_barang
    VARCHAR  kategori
    DATE     tanggal_pengadaan
    DECIMAL  nilai_perolehan
    VARCHAR  kondisi
    INT      lokasi_id FK
    INT      unit_kerja_id FK
    VARCHAR  status_label
    DATE     tanggal_snapshot
  }

  TBL_PEMELIHARAAN {
    INT      id_pemeliharaan PK
    VARCHAR  kode_barang FK
    DATE     tanggal_pemeliharaan
    VARCHAR  jenis_pemeliharaan
    DECIMAL  biaya
    VARCHAR  vendor
    VARCHAR  status
  }

  TBL_PENGADAAN {
    INT      id_pengadaan PK
    VARCHAR  nomor_pengadaan
    DATE     tanggal_pengadaan
    VARCHAR  vendor
    INT      total_item
    DECIMAL  total_nilai
    INT      unit_kerja_id FK
    VARCHAR  status
  }

  REF_LOKASI {
    INT      id_lokasi PK
    VARCHAR  gedung
    INT      lantai
    VARCHAR  ruangan
    INT      kapasitas
    VARCHAR  pic_nama
  }

  %% ========================
  %% 4. SISTEM KEPEGAWAIAN
  %% ========================

  TBL_PEGAWAI {
    INT      id_pegawai PK
    VARCHAR  nip
    VARCHAR  nama
    VARCHAR  jabatan
    INT      unit_kerja_id FK
    VARCHAR  status_kepegawaian
    DATE     tanggal_masuk
    VARCHAR  email
    VARCHAR  no_hp
  }

  TBL_ABSENSI {
    INT      id_absensi PK
    VARCHAR  nip FK
    DATE     tanggal
    TIME     waktu_masuk
    TIME     waktu_keluar
    VARCHAR  status_kehadiran
    DECIMAL  jam_kerja
  }

  TBL_PELATIHAN {
    INT      id_pelatihan PK
    VARCHAR  nip FK
    VARCHAR  nama_pelatihan
    DATE     tanggal_pelatihan
    INT      durasi_jam
    VARCHAR  penyelenggara
    VARCHAR  status
  }

  %% ========================
  %% 5. UNIT ORGANISASI & MONITORING
  %% ========================

  TBL_UNIT_KERJA {
    INT      id_unit PK
    VARCHAR  kode_unit
    VARCHAR  nama_unit
    INT      level
    INT      parent_unit_id FK
    VARCHAR  kepala_unit_nip
    VARCHAR  email_unit
  }

  TBL_LAPORAN_KINERJA {
    INT      id_laporan PK
    DATE     periode
    INT      unit_kerja_id FK
    INT      target_layanan
    INT      realisasi_layanan
    INT      target_surat
    INT      realisasi_surat
    DECIMAL  waktu_proses_rata2
    DECIMAL  tingkat_kepuasan
    DECIMAL  budget_allocated
    DECIMAL  actual_spending
    DECIMAL  efisiensi_persen
    DATE     tanggal_submit
    VARCHAR  status_approval
    TEXT     catatan
  }

  %% ========================
  %% RELATIONSHIPS
  %% ========================

  TBL_SURAT_MASUK      ||--o{ TBL_DISPOSISI        : "memiliki"
  REF_JENIS_SURAT      ||--o{ TBL_SURAT_MASUK      : "tipe_surat"
  REF_JENIS_SURAT      ||--o{ TBL_SURAT_KELUAR     : "tipe_surat"
  TBL_PEGAWAI          ||--o{ TBL_DISPOSISI        : "dari_pegawai"
  TBL_PEGAWAI          ||--o{ TBL_DISPOSISI        : "kepada_pegawai"

  REF_JENIS_LAYANAN    ||--o{ TBL_PERMINTAAN_LAYANAN : "tipe_layanan"
  TBL_UNIT_KERJA       ||--o{ TBL_PERMINTAAN_LAYANAN : "unit_tujuan"
  TBL_PEGAWAI          ||--o{ TBL_PERMINTAAN_LAYANAN : "pemohon"

  TBL_INVENTARIS       ||--o{ TBL_PEMELIHARAAN     : "dipelihara"
  TBL_INVENTARIS       }o--o{ TBL_PENGADAAN        : "pengadaan_barang"
  REF_LOKASI           ||--o{ TBL_INVENTARIS       : "berlokasi_di"
  TBL_UNIT_KERJA       ||--o{ TBL_INVENTARIS       : "dimiliki_oleh"

  TBL_UNIT_KERJA       ||--o{ TBL_PEGAWAI          : "memiliki_pegawai"
  TBL_UNIT_KERJA       ||--o{ TBL_LAPORAN_KINERJA  : "dilaporkan_oleh"

  TBL_PEGAWAI          ||--o{ TBL_ABSENSI          : "mencatat_absensi"
  TBL_PEGAWAI          ||--o{ TBL_PELATIHAN        : "mengikuti_pelatihan"

  TBL_UNIT_KERJA       ||--o{ TBL_UNIT_KERJA       : "parent_child"
